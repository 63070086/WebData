<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="nav">
        <a href="#page1">Home</a>
        <a href="#page2">Equipment</a>
        <a href="#page3">Process</a>
        <a href="#page4">Benefit</a>
        <a href="#page5">Composition</a>
    </div>
    <div class="page1" id="page1">
        <div class="show">
            <h1>Mail box notification</h1>
            <button onclick="show()">บทคัดย่อ</button>
        </div>
        <div class="about" id="about">
            <h1>Mail box notification</h2>
            <p>ในปัจจุบัน ได้มีการใช้ IOT หรือ Internet of Things (อินเทอร์เน็ตของสรรพสิ่ง) หมายถึง วัตถุ อุปกรณ์ พาหนะ สิ่งของเครื่องใช้ และสิ่งอำนวยความสะดวกในชีวิตอื่น ๆ ที่มนุษย์สร้างขึ้นโดยมีการฝังตัวของวงจรอิเล็กทรอนิกส์ ซอฟต์แวร์ เซ็นเซอร์ และการเชื่อมต่อกับเครือข่าย ซึ่งวัตถุสิ่งของเหล่านี้ สามารถเก็บบันทึกและแลกเปลี่ยนข้อมูลกันได้ อีกทั้ง สามารถรับรู้สภาพแวดล้อมและถูกควบคุมได้จากระยะไกล ผ่านโครงสร้างพื้นฐานการเชื่อมต่อเข้ากับสมาร์ทโฟน และยังสามารถสามารถประยุกต์ใช้กับอุปกรณ์ทุกอย่างที่ถูกออกแบบมาให้เชื่อมโยงกันได้บนเครือข่ายอินเทอร์เน็ตเพื่อที่จะสามารถสื่อสารกันได้ เนื่องจากคณะผู้จัดทำโครงการได้มีโอกาสศึกษาในวิชา Computer Programming โดยตัวไมโครคอนโทรลเลอร์สามารถสั่งอุปกรณ์ต่างๆ เช่น หุ่นยนต์ รถบังคับ การเปิด-ปิดของมอเตอร์ การใช้ NodeMCU WIFI Module ESP8266 เป็นบอร์ดพัฒนาโปรแกรมที่มี WIFIในตัวหรือสั่งให้ Sensor IR Infrared ตรวจจับวัตถุ โดยใช้ไมโครคอนโทรลเลอร์สอดคล้องกับวิชา Computer Programming โดยตัว Mail box notification เมื่อมีการส่งจดหมายลงกล่องไปรษณีย์จะมีการแจ้งเตือนผ่านทางแอพลิเคชั่น line สามารถรู้จำนวนจดหมายที่มาส่ง เวลาที่ส่งได้</p>
        </div>
        <div class="bg1"></div>
    </div>
    <div class="page2" id="page2">
        <div class="equipment">
            <div class="box" id="box">
                <img src="png/ir.png" alt="">
                <h4 id="name_compo">ir infrared obstacle avoidance sensor module</h1>
            </div>
            <div class="box" id="box">
                <img src="png/line.png" alt="">
                <h4 id="name_compo">jumpline</h1>
            </div>
            <div class="box" id="box">
                <img src="png/node.png" alt="">
                <h4 id="name_compo">nodemcu v3 ch340 lua wifi esp8266</h1>
            </div>
            <div class="box" id="box">
                <img src="png/bb.png" alt="">
                <h4 id="name_compo">breadboard 400 points</h1>
            </div>
        </div>
        <div class="bg2"></div>
    </div>
    <div class="page3" id="page3">
        <div class="select">
            <div class="choice" onclick="slide(0)">1</div>
            <div class="choice" onclick="slide(1)">2</div>
            <div class="choice" onclick="slide(2)">3</div>
            <div class="choice" onclick="slide(3)">4</div>
            <div class="choice" onclick="slide(4)">5</div>
        </div>
        <div class="process">
            <div class="plate" id="plate">1ใส่รูป
                <img src="png/process1.jpg" alt="">
                <div class="footer">1.นำสาย USB ต่อกับคอมเพื่ออัปโหลดโค้ลลงบอร์ด</div>
            </div>
            <div class="plate" id="plate">2ใส่รูป
                <img src="png/process2.jpg" alt="">
                <div class="footer">2.ใส่ชื่อ WIFI และ รหัส กับ Line token ซึ่งสามารถกดขอได้จาก https://notify-bot.line.me/my/</div>
            </div>
            <div class="plate" id="plate">3ใส่รูป
                <img src="png/process3.jpg" alt="">
                <div class="footer">3.กดอัปโหลด และ รอจนเสร็จ</div>
            </div>
            <div class="plate" id="plate">4ใส่รูป
                <img src="png/process4.jpg" alt="">
                <div class="footer">4.ลองนำจดหมายใส่เข้าไปใน ตู้ไปรษณีย์</div>
            </div>
            <div class="plate" id="plate">5ใส่รูป
                <img src="png/process5.jpg" alt="">
                <div class="footer">5.ใลน์ทำการแจ้งเตือนเมื่อจดหมายถูกตรวจจับแล้ว</div>
            </div>
        </div>
        <div class="bg3"></div>
    </div>
    <div class="page4" id="page4">
        <div class="benefit" data-text="เป็นส่วนหนึ่งในการค้นคว้าหาควารู้เพิ่มเติมหลังจากการเรียน 
        ตัวอุปกรณ์นี้สามารถนำไปต่อยอดได้ในระบบอุตสาหกรรม
        ในกระบวนการผลิด หรือการนับจำนวนคนที่เข้าทำงาน
        เป็นต้น"></div>
        <div class="bg4"></div>
    </div>
    <div class="page5" id="page5">
        <div class="bg5"></div>
        <div class="composition" id="composition">
            <div class="unit">
                <div class="topic" onclick="op_text()">Code</div>
                <div class="topic" onclick="op_member()">Member</div>
                <div class="topic" onclick="op_video()">Video</div>
                <a href="wwws"></a>
            </div>
            <div class="text_code" id="text_code">
                <pre>void Line_Notify(String message) ;
void Line_Notify(String message) ;
#include <string.h>
#include <ESP8266WiFi.h>
#include <WiFiClientSecureAxTLS.h> 


#define WIFI_SSID "toen_teen_2.4G"
#define WIFI_PASSWORD "0636511325"


#define LINE_TOKEN "3gjQ1qUXWOFWJU8JUcm36EkHW9JHdzu8upbeAEUfO8g"
int check = 0;
int value = 0;
int num = 0;

void setup() {
  
  pinMode(D6, INPUT);

  Serial.begin(9600);

  WiFi.mode(WIFI_STA);
  // connect to wifi.
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  Serial.print("connecting");

  while (WiFi.status() != WL_CONNECTED) {
    Serial.print(".");
    delay(500);
  }
  Serial.println();
  Serial.print("connected: ");
  Serial.println(WiFi.localIP());
}

void loop() {
   int sensorValue = digitalRead(D6);
  
  if (sensorValue == 0 and check == 1) {
    Serial.print("sensorValue");
    Serial.println(sensorValue);
    Serial.print("check");
    Serial.println(check);
    Serial.println("state 2");
    num += 1;
  }
  else if (sensorValue == 0 and check == 0) {
    check = 1;
    num = 0;
    Serial.print("sensorValue");
    Serial.println(sensorValue);
    Serial.print("check");
    Serial.println(check);
    Serial.println("state 1");
    value += 1;
    char message[] = "ได้รับของจำนวน  ";
    char str[100];
    char message2[] = " ชิ้น";
    sprintf(str, "%d", value);
    strcat(str, message2);
    strcat(message, str);
    Line_Notify(message);
  }
  else if (sensorValue == 1 and check == 1) {
    check = 0;
    Serial.print("sensorValue");
    Serial.println(sensorValue);
    Serial.print("check");
    Serial.println(check);
    Serial.println("state 3");
  }
  Serial.println(sensorValue);
  if(num == 10){
    char message[] = "อาจจะมีของขวางเซนเซอร์ โปรดตรวจสอบ";
    Line_Notify(message);
  }
  delay(1000);
}

void Line_Notify(String message) {
  axTLS::WiFiClientSecure client; 

  if (!client.connect("notify-api.line.me", 443)) {
    Serial.println("connection failed");
    return;   
  }

  String req = "";
  req += "POST /api/notify HTTP/1.1\r\n";
  req += "Host: notify-api.line.me\r\n";
  req += "Authorization: Bearer " + String(LINE_TOKEN) + "\r\n";
  req += "Cache-Control: no-cache\r\n";
  req += "User-Agent: ESP8266\r\n";
  req += "Connection: close\r\n";
  req += "Content-Type: application/x-www-form-urlencoded\r\n";
  req += "Content-Length: " + String(String("message=" + message).length()) + "\r\n";
  req += "\r\n";
  req += "message=" + message;
  // Serial.println(req);
  client.print(req);
    
  delay(20);

  // Serial.println("-------------");
  while(client.connected()) {
    String line = client.readStringUntil('\n');
    if (line == "\r") {
      break;
    }
    //Serial.println(line);
  }
  // Serial.println("-------------");
}

</pre>
            </div>
            <div class="member" id="member">
                <div class="profile">
                    <h3>นายซันตะ นาคาโน<br>รหัศนักศึกษา 63070043</h3>
                    <img src="png/sun.jpg" alt="">
                </div>
                <div class="profile">
                    <h3>นายธีรภพ โพธิ์เกิด<br>รหัศนักศึกษา 63070086</h3>
                    <img src="png/aof.jpg" alt="">
                </div>
                <div class="profile">
                    <h3>นพณัฐ คำเมือง<br>รหัศนักศึกษา 63070090</h3>
                    <img src="png/teon.jpg" alt="">
                </div>
            </div>
            <div class="video" id="video">
                <iframe width="853" height="480" src="https://www.youtube.com/embed/or6L2fZOxcA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
</body>
</html>
